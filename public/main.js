var HNSM=function(){"use strict";function e(t){for(var a=[],n=0,r=t.length;n<r;n++){var s=t[n],i=s.content,o=[m.trust(i),m(".stats",s.time_ago+" by "+s.user)];s.comments.length&&o.push(e(s.comments)),0==s.level&&o.push(m(".divider")),a.push(m(".comment[style=margin-left: "+2*s.level+"rem]",o))}return a}function t(e){for(var t=0,a=this.length;t<a;t++)n.rmClass(this[t],"active");var r=e.target;r&&"a"==r.tagName.toLowerCase()&&n.adClass(r.parentNode,"active")}var a={base:"https://api.hackerwebapp.com/"},n={items2dom:function(e){for(var t=[],a=0,n=e.length;a<n;a++){var r=e[a],s=r.title;r.domain&&(s+=" ("+r.domain+")");var i=[];null!==r.points&&i.push(m("span.badge[data-badge="+r.points+"]","Points")),i.push(m("span.badge[data-badge="+r.comments_count+"]",m("a[href=#!/item/"+r.id+"]","Comments"))),r.user&&i.push(m("span.user",m("a[href=#!/user/"+r.user+"]","by "+r.user))),i.push(m("span.time",r.time_ago));for(var o=[],u=0,l=i.length;u<l;u++)o.push(m(".column.col-"+12/l,i[u]));var c=m(".news-item",[m("h5",m("a[href="+r.url+"][target=_blank][rel=noopener]",s)),m(".columns",o),m(".divider")]);t.push(c)}return t},comms2dom:e,adClass:function(e,t){var a=e.className.trim();return""==a?(e.className=t,1):a==t?0:a.indexOf(" "+t)>=0||a.indexOf(t+" ")>=0?0:(e.className+=" "+t,1)},rmClass:function(e,t){var a=e.className.trim();if(""==a)return 0;if(a==t)return e.className="",0;var n=" "+t;return a.indexOf(n)>=0?(e.className=e.className.replace(n,""),1):(n=t+" ",a.indexOf(n)>=0?(e.className=e.className.replace(n,""),1):0)},log:console.log.bind(console)},r=function(e){return{loading:!0,items:[],oninit:function(){this.loading=!0;var t=m.route.param("page")||1,n=a.base+e+"?page="+t,r=this;m.request(n).then(function(e){r.items=e,r.loading=!1})},view:function(){return this.loading?m(".loading"):n.items2dom(this.items)}}},s={loading:!0,user:!1,oninit:function(){this.loading=!0;var e=m.route.param("user"),t=a.base+"user/"+e,n=this;m.request(t).then(function(e){n.user=e,n.loading=!1})},view:function(){return this.loading?m(".loading"):(n.log(this.user),[m("h4",this.user.id),m(".karma","karma: "+this.user.karma),m(".time","created: "+this.user.created),m.trust(this.user.about)])}},i={loading:!0,item:!1,oninit:function(){this.loading=!0;var e=m.route.param("id"),t=a.base+"item/"+e,n=this;m.request(t).then(function(e){n.item=e,n.loading=!1})},view:function(){if(this.loading)return m(".loading");var e=[m("h4",this.item.title)];return 0!=this.item.url.indexOf("item?")&&e.push(m(".url",m("a[rel=noopener][target=_blank][href="+this.item.url+"]",this.item.url))),e.push(m(".stats",this.item.time_ago+" by "+this.item.user)),e.push(m("h5","Comments")),e.push(n.comms2dom(this.item.comments)),e}},o=document.getElementById("container");!function(){var e=location.hostname;if("localhost"==e||e.match(/\.localhost$/))return 0;if("https:"==location.protocol)return 0;var t=location.href.replace(/^http:/,"https:");location.href=t}(),"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("sw.js").then(function(e){n.log("ServiceWorker registration successful with scope: ",e.scope)},function(e){n.log("ServiceWorker registration failed: ",e)})}),function(){var e=document.getElementById("navigation"),a=e.querySelectorAll(".tab-item");e.addEventListener("click",t.bind(a));var n=location.hash.substr(3).replace(/\/.*/,"");""==n&&(n="news");var r=e.querySelector("a[data-link="+n+"]");t.call(a,{target:r})}();var u={router:m.route(o,"/",{"/":r("news"),"/news/:page":r("news"),"/newest/:page":r("newest"),"/ask/:page":r("ask"),"/show/:page":r("show"),"/jobs/:page":r("jobs"),"/user/:user":s,"/item/:id":i})};return function(){var e=document.createElement("link");e.rel="stylesheet",e.href="ext/spectre.css",document.querySelector("head").appendChild(e)}(),u}();
//# sourceMappingURL=main.js.map
